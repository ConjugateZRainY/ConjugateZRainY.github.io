---
date: '2025-08-01T15:57:25+08:00'
draft: false
title: '微分流形（一）流形上的微积分'
tags: ['微分流形']
---

本系列预计有三篇文章。
1. 从流形的定义出发，到流形上的积分。
2. 从 Lie 群开始，到 Lie 群上的积分，不变测度。
3. 从联络开始，涉及 Riemann 流形，抵达 Gauss-Bonnet-Chern 定理和 Atiyah-Singer 指标定理。

微分流形是很多现代代数和分析应用的场所，所以很多工具看起来都是神来之笔，信手拈来。本文叙述的只是一种逻辑建构，实际数学史上的发展路径相当复杂。

# 流形、Manifold、多様体、Mannigfaltigkeit

为了把微积分从欧氏空间推广到更一般的“空间”上，我们先问：什么样的空间才有资格做微积分？最自然的外延，最合理的答案是“局部看起来像欧氏空间”的拓扑空间——即每一点的邻域都能展平成一块标准的 \(\mathbb{R}^n\)。我们称这样的空间为**流形**，记作 \(\mathcal{M}\)。这个“局部欧氏”的要求，是今天教科书里最常用的定义。

- 这一定义是**内蕴**的：我们只关心 \(\mathcal{M}\) 自身的结构，而不假设它躺在某个更大的背景空间里。Hermann Weyl 在讲课时最先明确提出这一观点，后来成了主流。内蕴的潜台词是：不管背景空间和局部坐标怎么变换，内在的性质仍然保持，不随之改变。
- 与此相对，Vladimir Arnold 偏爱**外蕴**的视角：先承认整个欧氏空间是一个流形，再把日常见到的“曲面”“曲线”等直接看成欧氏空间的子集（子流形）。根据 Whitney 嵌入定理，任何 \(n\) 维内蕴流形都能嵌入到某个 \(2n\) 维的欧氏空间；因此两种视角在数学上等价——只是出发点不同。

现代教学中，**图册**和**光滑转换映射**被用来严格定义微分流形。对于流形 \(\mathcal{M}\) 上的每个点我们可以建立一个**坐标卡** \((U, \phi)\)。一堆坐标卡 \(\{(U_{\alpha}, \phi_{\alpha})\}\) 的集合就是一本图册，就像是导览整个流形的地图。光滑转换则要求任何两个存在重叠部分的坐标卡 \((U, \phi)\) 和 \((V, \psi)\) 要满足 \(\phi \circ \psi^{-1}\) 是光滑的。因为一个点可能被多个坐标卡覆盖。光滑流形之间可以有光滑映射 \(f: \mathcal{M} \to \mathcal{N}\)。

# 外蕴视角到内蕴视角，切向量转变为导子

在流形上的一点 \(p\) 处，我们可以想到定义切空间 \( T_p \mathcal{M}\)，切空间之中的元素叫做切向量。几何直观上可以引导许多例子，例如三维欧氏空间的球面上每一点可以作一个切平面。从这里开始，一切变得魔幻起来。

几何直观是外蕴的，它假设球面“坐”在三维空间里。在球面上一点  \(p\) 处（比如北极点），一个非零向量的切向量 \(v\) 应该指向哪里？
如果你把球面看作是嵌在三维欧氏空间里的，那没问题。向量 \(v\) 是三维欧氏空间里的一个向量，它位于与球面在 \(p\) 点相切的那个平面上。但请注意，这个向量（除了零向量）的终点 \(p + v\) 已经不在球面上了。它戳出去了！

转换到内蕴视角，如果我们只知道球面自身，不知道它外面还有个三维欧氏的背景空间，那 \(p + v\) 这个操作就完全没有意义了。流形 \(\mathcal{M}\) 本身不是一个向量空间，不能把一个点和一个“向量”相加得到流形上的另一个点。“箭头”的方向是没有意义的。因此，经典的“箭头”模型，要么依赖于一个更大的外围空间（外蕴视角），要么在纯粹的流形内部根本无法定义。为了建立一个只依赖流形自身结构的理论，我们必须抛弃把切向量视为“箭头”的模型。这里还蕴藏了对于旧有视角的升级——其实 \(p + v\) 之中 \(p\) 和 \(v\) 不是在相同的空间，进一步可以拓展到物理上的广义坐标概念。

为了获取内蕴的视角，摆脱这个依赖，现代数学做出了代数的选择。数学家们发现切向量的作用是求函数沿某个方向的变化率。因为对于欧氏空间之中点 \(p\) 处的切向量 \(v = (v^1, \cdots, v^n)\)，在此处函数 \(f\) 的方向导数 \(D_v f\) 就是 \(D_v f\big|_p = v^i \frac{\partial f}{\partial x^i}\big|_p\)（此处使用 Einstein 求和约定）。

现在，我们把切向量看作是作用在流形上光滑函数上的**算子** \(X_p(\cdot) = D_v (\cdot)\)。也就是 \(X_p : C^\infty(U) \to \mathbb{R}\)，接受一个流形上的光滑函数 \(f\)，返回方向导数 \(X_p(f)\)。我们除了研究算子满足什么样的运算规则，没有其他选择。\(X_p\) 就是线性算子。而至关重要的一点是 \(X_p\) 是一个**导子**（满足 Leibniz 法则）。切空间 \( T_p \mathcal{M}\) 就是这些 \(X_p\) 的集合。

由于线性性质，\( T_p \mathcal{M}\) 就是线性空间。我们就要发问。

- 这个线性空间有没有对偶空间？
- 这个线性空间是无穷维的还是有限维的？
  - 如果是有限维的，维数是多少？

切空间 \( T_p \mathcal{M}\) 的维数与流形 \(\mathcal{M}\) 的维数完全相同。虽然我们是为了摆脱对外在坐标的依赖才引入了导子的抽象定义，但要研究这个抽象空间的结构，我们又必须借助坐标卡这个唯一的能进行具体计算的工具。现在所做的就是从抽象到具体的计算。借助局部坐标卡 \((U, \phi)\) 给出的局部坐标 \((x^1, \cdots, x^n)\)，根据 **Hadamard 引理**我们可知 \(X_p(f) = X_p(x^i) \frac{\partial f}{\partial x^i}\Big|_p \)，说明偏导数 \( \left \{\frac{\partial }{\partial x^i}\Big|_p \right \}\) 就是 \( T_p \mathcal{M}\) 的一组基，自然而然切空间的对偶空间——**余切空间** \( T_p^* \mathcal{M}\) 也有一组对偶基记为 \( \{dx^i\}\)，满足 \(dx^i(\frac{\partial}{\partial x^j}) = \frac{\partial}{\partial x^j} x^i = \delta^{i}_j\) 的运算规则。这样对偶运算定义为 \(df(X_p) = X_p(f) \)，\(df\) 是余切空间之中的元素，不难得到经典结论 \(df = \frac{\partial f}{\partial x^i} dx^i\)。

有一种定义方式是考虑流形 \(\mathcal{M}\) 上的曲线 \(c(t): (-\epsilon, \epsilon) \to M\)，这条曲线在 \(t=0\) 处经过 \(p\) 点。从几何直观上，\(c'(0)\) 就是 \(p\) 点处的切向量。但是这个定义显然不是内蕴的。因为计算导数要求我们计算 \(c(h) - c(0)\)，而流形未必是向量空间，无法做加减法，除非我们把它放在一个外在的背景下，视为欧氏空间之中的向量——这就回到了外蕴的视角。所以，我们无法把 \(c'(0)\) 视作一个“向量”，而是视为作用在 \(p\) 此处的光滑函数上的导子，也就是
\(c'(0) f = \frac{d(f \circ c)}{dt}\Big|_{t=0}\)。由于曲线 \(c\) 可以有多种选取方式，因此定义在 \(t=0\) 时刻 \(c(0)=p\) 且 \(c'(0) f\) 都相等的 \(c'(0)\) 的等价类，按照等价关系分类得到切向量。

曲线定义就像一种脚手架，可以解释一些动机，从曲线定义得到代数结论，再把曲线定义这个脚手架拆除。刚才我们讨论的是单个流形的内容。我们也可以利用曲线定义导出转移映射的定义。如果 \(F: \mathcal M \to \mathcal N\) 是从流形 \(\mathcal M\) 到 \(\mathcal N\) 的映射，和前面一样定义 \(p\) 和 \(c(t)\)，那么 \(F \circ c\) 就是流形 \(\mathcal N\) 上经过点 \(F(p)\) 的曲线。现在问题是在映射下原来 \(p\) 处的切向量 \(X_p\) 变得如何了？如果 \(g:C^{\infty}_{F(p)}(\mathcal N) \to \mathbb R\)，可以求导得到\((F \circ c)'(0)[g] = \frac{d}{dt} (g \circ F \circ c) \Big|_{t=0} = c'(0)[g \circ F] \)。据此我们可以得到导子 \(\bar{X}_{F(p)} g = X_p(g \circ F)\)。因此也定义推出 \(F_{*, p} : T_p \mathcal M \to T_{F(p)}\mathcal N\)，规则为 \(F_{*,p}(X_p)[g] = X_p(g \circ F) \)。顾名思义，推出就是把 \(\mathcal M\) 上\(p\)处的切向量推到 \(\mathcal N\) 上\(F(p)\)处。范畴论的背景我们不做深究。

这些定义呈现一种唯一性，定义**拉回**操作\(F^*: T^*_{F(p)}\mathcal N \to T^*_{p} \mathcal M\)，\((F^*w)_{p}X_p = \omega_{F(p)}\bar{X}_{F(p)} = \omega_{F(p)} F_* X_{p}\)，这其实有点无奈。从字面上，拉回就是把流形 \(\mathcal N\) 上的函数或者微分形式拉回到 \(\mathcal M\)。

# 微分结构：从点到场的粘合剂

现在，为了解决流形上的积分问题，我们需要找到一个不局限于一点的，在整个流形上有定义的光滑的微分形式 \(d\omega\)。为了连接起每一点处的切空间和余切空间，这就引出了切丛 \(T \mathcal{M}\) 和余切丛 \(T^* \mathcal{M}\) 。切丛就是切空间的不交并，\(T \mathcal{M} = \sqcup_{p \in \mathcal{M}} T_p \mathcal M = \cup_{p \in \mathcal{M}} \{p\} \times T_p \mathcal M\)。从而我们可能定义整个流形上的向量场 \(X: p \to X_p\)和 1-形式 \(\omega: p \to \omega_p\)。\(T_p \mathcal M\) 就是 \(p\) 点处长出来的纤维，对每一点 \(p\) 我们选择特定的 \(X_p\) 在流形上能够定义出截面。想象一下理发师给顾客剪发，电推子平推过头发，留下了一个截面（毛囊就是 \(p\)，头皮就是流形，每一根头发就是纤维 \(T_p \mathcal M\)，剪发就是截面操作）。

微分形式，Wedge 的定义，外微分，所有这些都是从广义 Stokes 定理 \(\int_{\partial \mathcal M} \omega = \int_{\mathcal M } d \omega\) 反向建构的而定义。只有满足反对称性的楔积，它在坐标变换下的行为才完美地、自动地与积分换元公式中的 Jacobi 行列式匹配。

为了定义 Wedge product，就要谈到张量积，张量积 \(\otimes\) 是为了多重线性映射定义的。例如对于 \(V \otimes V\)，模掉形如 \(v \otimes v\) 的元素生成的理想 \(I\)，\(V \otimes V / I\) 就是反对称的，wedge product 就从这里来。外微分则是一个反导子，并且满足 \(d^2 = 0\)，从而我们以此可以定义链复形。

# 流形上的积分

回到流形上的积分，我们无法直接在弯曲空间上计算，但我们可以将问题拆解成无数个可以在平直的欧氏空间中解决的小块，然后再把结果平滑地拼贴起来。不能在任何流形上随意积分，因为我们遇见的是有向的积分。一个 \(n\) 维流形是可定向的，当且仅当它存在一个处处非零的 \(n\) 阶微分形式，为每一点的切空间都定义了一个符号，从而让积分的值不会因为坐标选择的不同而差一个正负号。

如果一个坐标卡 \((U, \phi)\) 就能覆盖整个流形，那么其上的积分就可以拉回到欧氏空间，\( \int_{U} \omega = \int_{\phi(U)} (\phi^{-1})^* \omega \)。如果有多个坐标卡，那就利用单位分解。单位分解这个技术之中最为重要的一点就是局部有限性，保证了分解的加和是有限和。单位分解把图册上的微分形式限制到了每个坐标卡上，同时积分的值不依赖于单位分解的选择。广义 Stokes 定理的证明则除了应用流形上的积分，还要利用带边流形的定义。这种对带边流形 \(\mathcal H^n\) 的应用，和 Соболев 空间的迹定理异曲同工。

最后，由于 \(d^2 = 0\) 这种 exact 的性质，以及根据广义 Stokes 定理得到的 \(d\) 和 \(\partial \) 的伴随关系，我们引出 de Rham 上同调理论。毫无疑问，有了这些就可以用同调代数之中的许多工具，例如 Mayer-Vietoris 序列。
